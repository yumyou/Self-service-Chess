# 存取杆页面

## 功能概述

存取杆页面是一个用于管理物品存取操作的智能柜系统界面，包含以下主要功能：

- 存杆和取杆模式选择
- 智能柜门控制
- 操作状态实时反馈
- 操作记录管理

## 页面结构

```
pages/storage/
├── storage.js    # 页面逻辑
├── storage.wxml  # 页面模板
├── storage.wxss  # 页面样式
├── storage.json  # 页面配置
└── README.md     # 说明文档
```

## 主要功能

### 1. 模式选择

- **存杆模式**：用于存放物品到智能柜
- **取杆模式**：用于从智能柜取出物品
- **直观的卡片式选择界面**

### 2. 智能柜控制

- **柜门自动开关**：模拟真实的柜门控制
- **操作状态反馈**：实时显示柜门状态
- **安全确认机制**：操作完成后需要确认

### 3. 操作流程

#### 存杆流程
1. 选择存杆模式
2. 系统自动打开指定柜门
3. 用户存放物品
4. 确认完成操作
5. 系统自动关闭柜门

#### 取杆流程
1. 选择取杆模式
2. 系统自动打开指定柜门
3. 用户取出物品
4. 确认完成操作
5. 系统自动关闭柜门

### 4. 操作记录

- 记录所有存取操作
- 包含操作类型、柜门编号、时间
- 支持查看历史记录

## 使用方法

### 1. 页面跳转

```javascript
// 从用户页面跳转到存取杆页面
wx.navigateTo({
  url: '../storage/storage'
});

// 直接进入特定模式
wx.navigateTo({
  url: '../storage/storage?mode=deposit'  // 存杆模式
});

wx.navigateTo({
  url: '../storage/storage?mode=retrieve' // 取杆模式
});
```

### 2. 模式选择

```javascript
// 选择存杆模式
selectDeposit() {
  this.setData({
    currentMode: 'deposit'
  });
  this.startDeposit();
}

// 选择取杆模式
selectRetrieve() {
  this.setData({
    currentMode: 'retrieve'
  });
  this.startRetrieve();
}
```

## 数据格式

### 柜门信息

```javascript
{
  doorNumber: 'A-01',     // 柜门编号
  status: 'closed'        // 状态：closed/opening/open/closing
}
```

### 操作状态

```javascript
{
  loading: false,         // 是否正在加载
  message: ''            // 状态消息
}
```

### 操作记录

```javascript
{
  id: Date.now(),
  type: 'deposit',        // 操作类型：deposit/retrieve
  doorNumber: 'A-01',     // 柜门编号
  time: '2025-01-29 10:30:00',
  status: 'completed'     // 操作状态
}
```

## 界面特点

### 1. 选择模式界面
- **双卡片布局**：存杆和取杆两个大卡片
- **颜色区分**：橙色代表存杆，蓝色代表取杆
- **图标设计**：使用直观的图标表示功能

### 2. 操作界面
- **中央图标**：突出显示当前操作类型
- **状态提示**：清晰的操作指导文字
- **柜门信息**：显示当前操作的柜门编号
- **操作按钮**：确认完成和取消操作

### 3. 交互反馈
- **加载动画**：柜门开关时的加载状态
- **状态变化**：实时显示操作进度
- **成功提示**：操作完成后的反馈

## 技术特点

- **状态管理**：完整的状态流转管理
- **模拟真实**：模拟真实的柜门控制流程
- **用户友好**：清晰的操作指导和反馈
- **错误处理**：完善的异常情况处理

## 注意事项

1. **操作安全**：确保柜门正确开关
2. **状态同步**：保持界面状态与实际状态一致
3. **用户引导**：提供清晰的操作指导
4. **异常处理**：处理网络异常和设备故障

## 更新日志

- **v1.0.0** (2025-01-29)
  - 初始版本发布
  - 存杆和取杆功能
  - 智能柜门控制
  - 操作记录管理 